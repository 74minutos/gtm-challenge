---
import BloqueLayout from '../layouts/BloqueLayout.astro';
---

<BloqueLayout 
  title="Bloque 4: Arquitectos del Funnel" 
  bloque={4}
  prevLink="/demo-live"
  nextLink="/bloque-5"
>
  <!-- Welcome -->
  <section class="py-12 text-center">
    <div class="text-6xl mb-4">ğŸ—ï¸</div>
    <h1 class="text-4xl font-bold mb-4">Arquitectos del Funnel</h1>
    <span class="inline-block px-4 py-2 bg-emerald-500/20 text-emerald-300 rounded-full text-sm mb-8">
      â±ï¸ Bloque 4 Â· ~25 min
    </span>
    
    <div class="bg-slate-800/50 rounded-xl p-6 max-w-3xl mx-auto text-left mb-8">
      <p class="text-xl mb-4"><strong>Los eventos son ladrillos. Los funnels, el plano.</strong></p>
      <p class="text-slate-300 mb-4">Este bloque te enseÃ±a a diseÃ±ar estructuras de mediciÃ³n coherentes, escalables y alineadas con negocio.</p>
      <p class="text-slate-300">AprenderÃ¡s a mapear el viaje, detectar fugas y construir una arquitectura que otros equipos puedan seguir.</p>
    </div>

    <div class="bg-amber-500/10 border-l-4 border-amber-500 p-6 rounded-r-xl max-w-3xl mx-auto">
      <p class="text-lg"><strong>Â¿Por quÃ© esto importa?</strong></p>
      <p class="text-slate-300">La diferencia entre "veo nÃºmeros" y "veo dÃ³nde se escapa el dinero" estÃ¡ en cÃ³mo diseÃ±as tus funnels.</p>
      <p class="text-amber-300 mt-2">Un funnel mal diseÃ±ado te deja ciego. Un funnel bien diseÃ±ado te abre oportunidades de â‚¬â‚¬â‚¬.</p>
    </div>
  </section>

  <!-- QuÃ© es un funnel -->
  <section class="py-12 border-t border-slate-700">
    <h2 class="text-3xl font-bold text-center mb-8">ğŸ§­ QuÃ© es un funnel (visiÃ³n estratÃ©gica)</h2>
    
    <div class="bg-slate-800/50 rounded-xl p-6 max-w-3xl mx-auto mb-8">
      <p class="text-xl mb-4"><strong>Un funnel no es un dashboard bonito.</strong></p>
      <p class="text-slate-300">Es la traducciÃ³n operativa de una intenciÃ³n de negocio.</p>
    </div>

    <div class="bg-emerald-500/10 p-6 rounded-xl max-w-2xl mx-auto mb-8">
      <h3 class="font-bold mb-4">ğŸ“Œ Fundamentos:</h3>
      <ul class="space-y-2 text-slate-300">
        <li>âœ“ Representa pasos crÃ­ticos hacia un objetivo</li>
        <li>âœ“ Cada paso es un evento medible</li>
        <li>âœ“ Lo importante no es solo quÃ© hace el usuario, sino <strong>cuÃ¡ndo y en quÃ© orden</strong></li>
        <li>âœ“ Un buen funnel permite detectar fricciones y oportunidades</li>
      </ul>
    </div>

    <div class="bg-slate-800/50 rounded-xl p-6 max-w-2xl mx-auto mb-8">
      <h3 class="font-bold mb-4">ğŸ“Š Ejemplo de Funnel E-commerce:</h3>
      <div class="bg-black p-4 rounded-lg font-mono text-emerald-400 text-center">
        view_item â†’ add_to_cart â†’ begin_checkout â†’ purchase
      </div>
    </div>

    <div class="bg-amber-500/10 border-l-4 border-amber-500 p-6 rounded-r-xl max-w-3xl mx-auto">
      <p class="text-lg"><strong>La diferencia clave:</strong></p>
      <p class="text-slate-300">Un <em>evento aislado</em> te dice que pasÃ³ algo.</p>
      <p class="text-slate-300">Un <em>funnel estructurado</em> te dice el camino completo.</p>
      <p class="text-amber-300 mt-2 font-bold">La conversiÃ³n es el resultado de un comportamiento, no de un botÃ³n.</p>
    </div>
  </section>

  <!-- CÃ³mo mapear un funnel -->
  <section class="py-12 border-t border-slate-700">
    <h2 class="text-3xl font-bold text-center mb-8">ğŸ—ºï¸ CÃ³mo mapear un funnel</h2>
    
    <div class="bg-slate-800/50 rounded-xl p-6 max-w-3xl mx-auto mb-8">
      <p class="text-xl font-bold">El funnel empieza en un Excel o Figma, no en GTM.</p>
    </div>

    <div class="bg-emerald-500/10 p-6 rounded-xl max-w-3xl mx-auto mb-8">
      <h3 class="font-bold mb-6">ğŸ“Œ Proceso de Mapeo:</h3>
      
      <div class="space-y-4">
        <div class="flex items-start gap-4 p-4 bg-slate-800/30 rounded-lg">
          <span class="w-8 h-8 bg-emerald-500 rounded-full flex items-center justify-center font-bold shrink-0 text-black">1</span>
          <div>
            <h4 class="font-bold">Definir el objetivo de negocio</h4>
            <p class="text-slate-400 text-sm">Ej: vender entradas, captar leads, suscripciones</p>
          </div>
        </div>
        
        <div class="flex items-start gap-4 p-4 bg-slate-800/30 rounded-lg">
          <span class="w-8 h-8 bg-emerald-500 rounded-full flex items-center justify-center font-bold shrink-0 text-black">2</span>
          <div>
            <h4 class="font-bold">Listar pasos crÃ­ticos</h4>
            <p class="text-slate-400 text-sm">Ej: pÃ¡gina de detalle â†’ aÃ±adir al carrito â†’ checkout</p>
          </div>
        </div>
        
        <div class="flex items-start gap-4 p-4 bg-slate-800/30 rounded-lg">
          <span class="w-8 h-8 bg-emerald-500 rounded-full flex items-center justify-center font-bold shrink-0 text-black">3</span>
          <div>
            <h4 class="font-bold">Mapear eventos existentes y brechas</h4>
            <p class="text-slate-400 text-sm">Â¿QuÃ© ya mide? Â¿QuÃ© falta?</p>
          </div>
        </div>
        
        <div class="flex items-start gap-4 p-4 bg-slate-800/30 rounded-lg">
          <span class="w-8 h-8 bg-emerald-500 rounded-full flex items-center justify-center font-bold shrink-0 text-black">4</span>
          <div>
            <h4 class="font-bold">DiseÃ±ar naming consistente</h4>
            <p class="text-slate-400 text-sm">Usar estÃ¡ndares (GA4, custom)</p>
          </div>
        </div>
        
        <div class="flex items-start gap-4 p-4 bg-slate-800/30 rounded-lg">
          <span class="w-8 h-8 bg-emerald-500 rounded-full flex items-center justify-center font-bold shrink-0 text-black">5</span>
          <div>
            <h4 class="font-bold">Traducirlo a eventos medibles en GTM</h4>
            <p class="text-slate-400 text-sm">Triggers, variables, tags</p>
          </div>
        </div>
      </div>
    </div>

    <div class="bg-amber-500/10 border-l-4 border-amber-500 p-6 rounded-r-xl max-w-3xl mx-auto text-center">
      <p class="text-lg font-bold">"Un funnel bien diseÃ±ado es como un buen guion:</p>
      <p class="text-lg font-bold text-amber-300">cada escena lleva a la siguiente."</p>
    </div>
  </section>

  <!-- Estructura tÃ©cnica del funnel -->
  <section class="py-12 border-t border-slate-700">
    <h2 class="text-3xl font-bold text-center mb-8">âš™ï¸ Estructura tÃ©cnica del funnel (GTM + GA4)</h2>
    
    <div class="bg-slate-800/50 rounded-xl p-6 max-w-3xl mx-auto mb-8">
      <p class="text-lg mb-4"><strong>Un funnel operativo vive en dos mundos:</strong></p>
      <ul class="space-y-2 text-slate-300">
        <li><strong>GTM:</strong> donde escuchas y defines los eventos</li>
        <li><strong>GA4 (o similar):</strong> donde los analizas</li>
      </ul>
    </div>

    <div class="bg-emerald-500/10 p-6 rounded-xl max-w-2xl mx-auto mb-8">
      <h3 class="font-bold mb-4">ğŸ“Œ Estructura Base:</h3>
      <ul class="space-y-2 text-slate-300">
        <li>âœ“ <strong>Naming estandarizado</strong> (view_item, add_to_cartâ€¦)</li>
        <li>âœ“ <strong>Uso correcto de parÃ¡metros</strong> (items, value, currencyâ€¦)</li>
        <li>âœ“ <strong>AlineaciÃ³n con modelos de anÃ¡lisis</strong> (Exploraciones, Conversion Funnels en GA4)</li>
        <li>âœ“ <strong>Evitar duplicaciones</strong> y eventos fuera de secuencia</li>
      </ul>
    </div>

    <div class="bg-red-500/10 border-l-4 border-red-500 p-6 rounded-r-xl max-w-3xl mx-auto">
      <p class="text-lg"><strong>âš ï¸ Punto crÃ­tico:</strong></p>
      <p class="text-slate-300">Los funnels no se "arreglan" en GA4.</p>
      <p class="text-amber-300 font-bold">Se arreglan en cÃ³mo los envÃ­as desde GTM.</p>
    </div>
  </section>

  <!-- Naming & Governance -->
  <section class="py-12 border-t border-slate-700">
    <h2 class="text-3xl font-bold text-center mb-8">ğŸ“š Naming & Governance</h2>
    
    <div class="bg-slate-800/50 rounded-xl p-6 max-w-3xl mx-auto mb-8">
      <p class="text-xl mb-4"><strong>No hay funnel sÃ³lido sin nomenclatura sÃ³lida.</strong></p>
      <p class="text-amber-300">Un nombre inconsistente hoy = 100 dashboards rotos maÃ±ana.</p>
    </div>

    <div class="bg-emerald-500/10 p-6 rounded-xl max-w-2xl mx-auto mb-8">
      <h3 class="font-bold mb-4">ğŸ“Œ Buenas PrÃ¡cticas:</h3>
      <ul class="space-y-2 text-slate-300">
        <li>âœ“ <strong>EstÃ¡ndares GA4</strong> â†’ view_item, add_to_cart, etc.</li>
        <li>âœ“ <strong>Evitar camelCase aleatorio</strong></li>
        <li>âœ“ <strong>Usar parÃ¡metros obligatorios</strong> (ej. items, value)</li>
        <li>âœ“ <strong>Documentar cada evento</strong> y su propÃ³sito</li>
      </ul>
    </div>

    <div class="bg-amber-500/10 border-l-4 border-amber-500 p-6 rounded-r-xl max-w-3xl mx-auto text-center">
      <p class="text-lg font-bold">"Nombrar no es un trÃ¡mite.</p>
      <p class="text-lg font-bold text-amber-300">Es una decisiÃ³n estratÃ©gica."</p>
    </div>
  </section>

  <!-- Medir embudos reales -->
  <section class="py-12 border-t border-slate-700">
    <h2 class="text-3xl font-bold text-center mb-8">ğŸ“Š Medir embudos reales</h2>
    
    <div class="bg-slate-800/50 rounded-xl p-6 max-w-3xl mx-auto mb-8">
      <p class="text-lg mb-4"><strong>Medir un funnel no es solo implementarlo:</strong></p>
      <p class="text-slate-300">hay que verificarlo, entenderlo y analizarlo.</p>
    </div>

    <div class="bg-emerald-500/10 p-6 rounded-xl max-w-3xl mx-auto mb-8">
      <h3 class="font-bold mb-6">ğŸ“Œ Pasos para Medir:</h3>
      
      <div class="space-y-3">
        <div class="flex items-center gap-4 p-3 bg-slate-800/30 rounded-lg">
          <span class="font-bold text-emerald-400">1</span>
          <span><strong>QA en GTM</strong> (Preview Mode, DebugView)</span>
        </div>
        <div class="flex items-center gap-4 p-3 bg-slate-800/30 rounded-lg">
          <span class="font-bold text-emerald-400">2</span>
          <span><strong>QA cruzado</strong> (Network / Tag Assistant)</span>
        </div>
        <div class="flex items-center gap-4 p-3 bg-slate-800/30 rounded-lg">
          <span class="font-bold text-emerald-400">3</span>
          <span><strong>ValidaciÃ³n en GA4 DebugView</strong></span>
        </div>
        <div class="flex items-center gap-4 p-3 bg-slate-800/30 rounded-lg">
          <span class="font-bold text-emerald-400">4</span>
          <span><strong>Reporting en GA4 Explorations</strong> (Funnel Exploration)</span>
        </div>
        <div class="flex items-center gap-4 p-3 bg-slate-800/30 rounded-lg">
          <span class="font-bold text-emerald-400">5</span>
          <span><strong>Comparar comportamiento real con el diseÃ±o original</strong></span>
        </div>
      </div>
    </div>

    <div class="bg-blue-500/10 p-6 rounded-xl max-w-2xl mx-auto">
      <h3 class="font-bold text-blue-400 mb-3">ğŸ’¡ Tip Pro:</h3>
      <p class="text-slate-300">Usar "Funnel Steps" personalizados en GA4 y Debug para detectar cuellos de botella.</p>
    </div>
  </section>

  <!-- Resumen Final -->
  <section class="py-12 border-t border-slate-700 text-center">
    <div class="text-6xl mb-6">ğŸ—ï¸</div>
    <h2 class="text-3xl font-bold mb-6">Arquitectos del Funnel</h2>
    
    <div class="bg-slate-800/50 rounded-xl p-8 max-w-2xl mx-auto mb-8">
      <p class="text-xl mb-6">ğŸ† <strong>Â¡Felicidades!</strong> Has completado el Bloque 4.</p>
      
      <h3 class="font-bold mb-4">ğŸ“š Lo que has aprendido:</h3>
      <ul class="text-left space-y-2 text-slate-300">
        <li>âœ… A traducir objetivos de negocio en funnels claros</li>
        <li>âœ… A estructurar eventos que construyen caminos reales</li>
        <li>âœ… A nombrar y gobernar tus datos</li>
        <li>âœ… A validar que lo que mides... es lo que pasa</li>
      </ul>
    </div>

    <p class="text-xl text-slate-300">Ya no eres un simple oyente de GTM.</p>
    <p class="text-xl font-bold text-emerald-400 mb-8">Eres un arquitecto de experiencias medibles.</p>
  </section>
</BloqueLayout>
